# 프로젝트 기능 구현 상세 가이드

본 문서는 Spring 게시판 프로젝트의 **전체 기능 명세서**입니다.
기본적인 게시판 기능(CRUD)부터 새롭게 추가된 13가지 확장 기능까지, 프로젝트의 모든 기능을 상세히 기술합니다.

---

## 1. 전제 조건 (Prerequisites)

이 프로젝트는 다음 환경에서 구동됩니다.

- **Java**: 11
- **Framework**: Spring Framework 5 (Legacy Project)
- **Database**: MySQL 8.0
- **Frontend**: JSP, Bootstrap 5, jQuery

---

## 2. 데이터베이스 설정 (Database Setup)

모든 확징 기능이 작동하기 위해서는 아래 테이블 설정이 필요합니다.

```sql
-- 1. 좋아요 시스템 (tbl_like) 생성
CREATE TABLE IF NOT EXISTS tbl_like (
    bno INT NOT NULL,
    liker VARCHAR(50) NOT NULL,
    PRIMARY KEY (bno, liker),
    FOREIGN KEY (bno) REFERENCES board(bno) ON DELETE CASCADE
);

-- 2. 게시글 테이블(board) 컬럼 추가
-- 좋아요 수, 비밀글 여부, 비밀번호 컬럼 추가 (이미 존재 시 생략 가능)
ALTER TABLE board ADD COLUMN like_count INT DEFAULT 0;
ALTER TABLE board ADD COLUMN is_secret BOOLEAN DEFAULT false;
ALTER TABLE board ADD COLUMN password VARCHAR(100);
```

---

## 3. 기능 상세 설명

### A. 핵심 기본 기능 (Core Features)

1. **게시글 작성 (Create)**

   - **기능**: 제목, 내용, 작성자를 입력하여 새로운 게시글을 등록합니다.
   - **특징**: 다중 파일 업로드를 지원하며, 로그인한 사용자만 작성 가능합니다. 작성 시 본문 내용은 줄바꿈 및 서식이 유지됩니다.

2. **게시글 목록 및 검색 (Read & Search)**

   - **기능**: 등록된 게시글을 페이지네이션(Paging) 처리하여 목록으로 보여줍니다.
   - **특징**: 제목, 내용, 작성자 기준으로 키워드 검색이 가능합니다. 기본적으로 최신순으로 정렬됩니다.

3. **게시글 상세 조회 (Read Detail)**

   - **기능**: 게시글 클릭 시 상세 내용을 확인할 수 있습니다.
   - **특징**: 첨부파일이 있을 경우 미리보기(이미지) 또는 아이콘(일반 파일)으로 표시되며 다운로드 가능합니다.

4. **게시글 수정/삭제 (Update/Delete)**

   - **기능**: 작성자 본인에 한해 게시글을 수정하거나 삭제할 수 있습니다.
   - **특징**: 수정 시 기존 첨부파일을 유지하거나 삭제/추가할 수 있습니다. 삭제 시 관련 댓글과 첨부파일도 함께 정리됩니다.

5. **댓글 시스템 (Reply System)**
   - **기능**: 게시글 하단에 댓글을 작성, 조회, 삭제할 수 있습니다.
   - **특징**: AJAX를 사용하여 페이지 새로고침 없이 댓글이 등록되고 목록이 갱신됩니다.

---

### B. 기능적 개선 (Functional Improvements)

6. **게시글 정렬 고도화 (Enhanced Sorting)**

   - **기능**: 목록에서 [최신순 / 조회순 / 오래된순] 필터를 선택하여 정렬 방식을 변경할 수 있습니다.
   - **구현**: 사용자가 선택한 기준에 따라 DB 쿼리의 `ORDER BY` 절을 동적으로 변경합니다.

7. **비회원 조회수 집계 (Anonymous View Counting)**

   - **기능**: 로그인하지 않은 방문자도 조회수가 집계되며, 쿠키(24시간 유효)를 이용해 중복 조회를 방지합니다.
   - **구현**: 요청 헤더의 쿠키 존재 여부를 확인하여, 첫 방문 시 고유 ID를 부여하고 조회 로그를 기록합니다.

8. **댓글 수정 UI 개선 (Reply Modification)**

   - **기능**: 댓글 텍스트 클릭 시 즉시 수정 가능한 입력창으로 변환됩니다.
   - **구현**: 별도 페이지 이동 없이 DOM 조작을 통해 수정 폼을 노출하고, AJAX `PUT` 요청으로 저장합니다.

9. **이전글/다음글 내비게이션 (Prev/Next Navigation)**
   - **기능**: 상세 페이지 하단에 현재 글의 앞/뒤 게시글 링크를 제공하여 연속적인 조회가 가능합니다.
   - **구현**: 현재 글 번호(bno)보다 작거나 큰 게시글 중 가장 인접한 글 하나씩을 조회하여 링크를 생성합니다.

---

### C. 사용자 경험 개선 (UX Enhancements)

10. **실시간 검색 (Live Search)**

    - **기능**: 검색어 입력 시, 엔터 키 없이도 자동으로 검색 결과가 갱신됩니다.
    - **구현**: 입력 감지(keyup) 후 0.5초의 딜레이(Debounce)를 주어 API 요청 횟수를 최적화했습니다.

11. **무한 스크롤 (Infinite Scroll)**

    - **기능**: '∞ 무한 스크롤' 모드를 켜면, 스크롤을 내릴 때 다음 페이지 게시글이 자동으로 로드됩니다.
    - **구현**: IntersectionObserver API로 화면 하단 도달을 감지하여 추가 데이터를 비동기(JSON)로 받아옵니다.

12. **자동 임시 저장 (Auto-Save Drafts)**

    - **기능**: 글 작성 중 예기치 않게 종료되어도, 다시 돌아오면 작성하던 내용이 복원됩니다.
    - **구현**: LocalStorage에 제목과 내용을 실시간 저장하며, 글 등록 성공 시 스토리지를 비웁니다.

13. **해시태그 시스템 (Hashtag System)**
    - **기능**: 본문에 `#단어` 형식으로 입력하면 자동으로 검색 링크가 생성됩니다.
    - **구현**: 정규표현식으로 텍스트를 파싱하여 `#`으로 시작하는 단어를 찾아 `<a>` 태그로 변환합니다.

---

### D. 참여 및 유틸리티 (Engagement & Utility)

14. **좋아요 시스템 (Like System)**

    - **기능**: 마음에 드는 게시글에 하트(좋아요)를 보낼 수 있습니다.
    - **구현**: 실시간 토글 방식으로 즉각적인 피드백을 주며, 중복 좋아요는 불가능합니다.

15. **인기글 배지 (Trending Badge)**

    - **기능**: 조회수가 높은 화제의 글에는 🔥 **HOT** 배지가 붙습니다.
    - **구현**: 조회수 10회 이상인 게시글에 자동으로 강조 배지를 렌더링합니다.

16. **비밀글 모드 (Ghost Mode)**

    - **기능**: 프라이빗한 글 작성을 위해 비밀번호를 설정하여 잠글 수 있습니다.
    - **구현**: 목록에서는 `🔒` 아이콘으로 내용을 가리고, 올바른 비밀번호를 입력해야만 잠금이 해제되어 내용을 볼 수 있습니다.

17. **읽기 시간 예측 (Reading Time Estimation)**

    - **기능**: 글 분량을 분석하여 "예상 읽기 시간: 2분"과 같이 안내합니다.
    - **구현**: 한국어 평균 독해 속도를 기준으로 계산된 시간을 표시해 줍니다.

18. **PDF로 저장 (PDF Export)**
    - **기능**: 게시글 내용을 깔끔한 PDF 문서로 소장할 수 있습니다.
    - **구현**: 클라이언트 측에서 현재 화면을 캡처(Canvas) 후 PDF로 변환하여 다운로드를 제공합니다.
